<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixed Deposit Dashboard</title>
    <style>
        body {
            font-family: 'San Francisco', sans-serif;
            background: rgb(253,252,220);
            background: linear-gradient(90deg, rgba(253,252,220,1) 0%, rgb(184, 242, 230) 100%);
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .table-container {
            display: flex;
            justify-content: center;
            overflow-x: auto; /* Allow horizontal scrolling on small screens */
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eaeaea;
        }

        th {
            background-color: rgb(184, 242, 230);
            color: rgb(104, 97, 97);
            font-weight: bold;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .redeem-button {
            background-color: #34c759;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .redeem-button:hover:not(:disabled) {
            background-color: #28a745;
        }

        .redeem-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Compact styles for mobile view */
        @media (max-width: 600px) {
            th, td {
                padding: 10px; /* Reduced padding */
                font-size: 14px; /* Smaller font size */
            }


            table {
                width: 100%; /* Full width on mobile */
                margin: 10px 0; /* Reduced table margin */
            }

            .redeem-button {
                padding: 8px 12px; /* Smaller button padding */
                font-size: 12px; /* Smaller button font size */
            }

            th {
                font-size: 12px; /* Smaller header font size */
            }
        }
    </style>
</head>
<body>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Unique Code</th>
                <th>Name</th>
                <th>Amount</th>
                <th>Date</th>
                <th>Maturity</th>
                <th>Accrued Interest</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="fd-table-body">
            <!-- Dynamic rows will be added here -->
        </tbody>
    </table>
</div>

<script>
    const fixedDeposits = [
        { code: 'FD001', name: 'Test', amount: 10000, date: '2019-11-01', maturityYears: 5 },
        { code: 'FD002', name: 'Example', amount: 20000, date: '2020-01-15', maturityYears: 3 },
        { code: 'FD003', name: 'Sample', amount: 15000, date: '2021-06-10', maturityYears: 4 },
    ];

    const interestRate = 0.16; // 16% interest
    const today = new Date();

    function calculateAccruedInterest(amount, startDate, maturityYears) {
        const daysPassed = Math.floor((today - new Date(startDate)) / (1000 * 60 * 60 * 24));
        const totalYears = daysPassed / 365;
        
        let accruedInterest = 0;
        if (totalYears >= maturityYears) {
            for (let year = 1; year <= maturityYears; year++) {
                accruedInterest += amount * Math.pow((1 + interestRate), year) - amount * Math.pow((1 + interestRate), year - 1);
            }
        } else {
            accruedInterest = amount * (Math.pow((1 + interestRate), totalYears) - 1);
        }

        return accruedInterest;
    }

    function updateTable() {
        const tbody = document.getElementById('fd-table-body');
        tbody.innerHTML = ''; // Clear existing rows
        fixedDeposits.forEach(fd => {
            const accruedInterest = calculateAccruedInterest(fd.amount, fd.date, fd.maturityYears).toFixed(2);
            const redeemButtonDisabled = (Math.floor((today - new Date(fd.date)) / (1000 * 60 * 60 * 24)) < fd.maturityYears * 365) ? false : true;

            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${fd.code}</td>
                <td>${fd.name}</td>
                <td>₹${fd.amount}</td>
                <td>${fd.date}</td>
                <td>${fd.maturityYears}</td>
                <td>₹${accruedInterest}</td>
                <td>
                    <button class="redeem-button" onclick="redeem('${fd.code}', ${accruedInterest})" ${redeemButtonDisabled ? 'disabled' : ''}>
                        Redeem
                    </button>
                </td>
            `;
            tbody.appendChild(row);
        });
    }

    function redeem(uniqueCode, accruedInterest) {
        const penalty = (0.10 * accruedInterest).toFixed(2);
        const message = `Premature withdrawal for Unique Code: ${uniqueCode}. Accrued Interest: ₹${accruedInterest}. Penalty: ₹${penalty}.`;
        const phoneNumber = '7456943225';
        const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
        window.open(whatsappURL, '_blank');
    }

    // Initial table population
    updateTable();
</script>

</body>
</html>
